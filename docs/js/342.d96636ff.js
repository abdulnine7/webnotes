"use strict";(self["webpackChunkwebnotes"]=self["webpackChunkwebnotes"]||[]).push([[342],{1726:(e,t,n)=>{n.d(t,{D:()=>i});var o=n(499),s=n(9835);const r=(e,t)=>{const n=(0,o.iH)(t),r=()=>{const t=window.localStorage.getItem(e);null!=t&&(n.value=JSON.parse(t))};r(),(0,s.bv)((()=>{window.addEventListener("storage",r)})),(0,s.Ah)((()=>{window.removeEventListener("storage",r)}));const i=()=>{window.localStorage.setItem(e,JSON.stringify(n.value))};return(0,s.YP)([n],i,{deep:!0}),n},i=()=>r("notes",[])},3394:(e,t,n)=>{n.d(t,{Z:()=>a});var o=n(9835);const s={class:"q-mr-auto q-ml-auto",style:{"max-width":"700px"}};function r(e,t){return(0,o.wg)(),(0,o.iD)("div",s,[(0,o.WI)(e.$slots,"default")])}var i=n(1639);const l={},d=(0,i.Z)(l,[["render",r]]),a=d},342:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Y});var o=n(9835),s=n(1957);const r={class:"row items-center justify-between"},i=(0,o._)("h4",{class:"q-mx-sm text-red-1"},"Your notes",-1),l={key:0,class:"q-mx-sm text-red-1"},d=(0,o._)("div",{class:"text-h6"},"Sharing Note:",-1),a=(0,o._)("p",{class:"q-mt-sm"}," Generating the One time password(OTP) for the note. ",-1),c=(0,o._)("p",{id:"otp",class:"text-center otp"},null,-1),u=(0,o._)("p",{class:"text-center"},"OTP valid for next 2 minutes:",-1),m=(0,o._)("div",{class:"text-h6"},"Enter the OTP",-1),p={id:"recievebox-error",hidden:""},h={id:"recievebox-success",hidden:""};function g(e,t,n,g,v,x){const w=(0,o.up)("q-btn"),b=(0,o.up)("NoteCard"),f=(0,o.up)("NotesContainer"),q=(0,o.up)("q-page"),y=(0,o.up)("q-card-section"),_=(0,o.up)("q-linear-progress"),W=(0,o.up)("q-card-actions"),C=(0,o.up)("q-card"),k=(0,o.up)("q-dialog"),I=(0,o.up)("q-input"),Z=(0,o.up)("q-banner"),E=(0,o.Q2)("close-popup");return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o.Wm)(q,{padding:""},{default:(0,o.w5)((()=>[(0,o.Wm)(f,null,{default:(0,o.w5)((()=>[(0,o._)("div",r,[i,(0,o._)("div",null,[(0,o.Wm)(w,{class:"q-mx-sm",round:"",color:"positive",icon:"save_alt",onClick:t[0]||(t[0]=t=>(this.recievebox=!0,e.recieveotp="")),title:"Recieve Note"}),(0,o.Wm)(w,{class:"q-mx-sm",round:"",color:"positive",icon:"add",to:"/new",title:"Add Note"})])]),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.notes,(({title:t,description:n,content:s},r)=>((0,o.wg)(),(0,o.j4)(b,{key:r,title:t,description:n,content:s,idx:r,onClick:t=>e.router.push(`/note/${r}`),onDeletenote:t=>e.deletenote(r),onSharenote:t=>e.sharenote(r),class:"q-mx-sm"},null,8,["title","description","content","idx","onClick","onDeletenote","onSharenote"])))),128)),0===e.notes.length?((0,o.wg)(),(0,o.iD)("div",l," You have not created any notes. ")):(0,o.kq)("",!0)])),_:1})])),_:1}),(0,o.Wm)(k,{modelValue:e.sharebox,"onUpdate:modelValue":t[1]||(t[1]=t=>e.sharebox=t)},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{class:"full-width"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[d])),_:1}),(0,o.Wm)(y,{class:"q-pt-none",id:"share-requsting"},{default:(0,o.w5)((()=>[a,(0,o.Wm)(_,{stripe:"",rounded:"",indeterminate:"",size:"20px",color:"info",class:"q-mt-md",width:"100%",value:e.progress},null,8,["value"])])),_:1}),(0,o.Wm)(y,{class:"q-pt-none",id:"share-otp",hidden:""},{default:(0,o.w5)((()=>[c,u,(0,o.Wm)(_,{rounded:"",size:"10px",color:"warning",class:"q-mt-sm",width:"100%",value:e.progress},null,8,["value"])])),_:1}),(0,o.Wm)(W,{align:"right"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(w,{flat:"",label:"Close",color:"primary"},null,512),[[E]])])),_:1})])),_:1})])),_:1},8,["modelValue"]),(0,o.Wm)(k,{modelValue:e.recievebox,"onUpdate:modelValue":t[5]||(t[5]=t=>e.recievebox=t),persistent:""},{default:(0,o.w5)((()=>[(0,o.Wm)(C,{class:"full-width"},{default:(0,o.w5)((()=>[(0,o.Wm)(y,null,{default:(0,o.w5)((()=>[m])),_:1}),(0,o.Wm)(y,{class:"q-pt-none"},{default:(0,o.w5)((()=>[(0,o.Wm)(I,{id:"recieveotp",modelValue:e.recieveotp,"onUpdate:modelValue":t[2]||(t[2]=t=>e.recieveotp=t),autofocus:"",mask:"####",error:!1,loading:!1,hint:"Enter a 4 digit OTP",rules:[e=>!!e||"* Required",e=>e.length>3||"Please enter 4 digit OTP"],maxlength:"4",onKeyup:t[3]||(t[3]=(0,s.D2)((t=>e.fetchNote(e.recieveotp)),["enter"])),"input-class":"text-center otp"},null,8,["modelValue","rules"]),(0,o.Wm)(_,{stripe:"",rounded:"",indeterminate:"",size:"20px",color:"info",class:"q-mt-md",width:"100%",hidden:"",id:"recievebox-loading"}),(0,o._)("div",p,[(0,o.Wm)(Z,{class:"text-center text-white bg-red q-mt-md",id:"recievebox-error-message",rounded:"",dense:""})]),(0,o._)("div",h,[(0,o.Wm)(Z,{class:"text-center text-white bg-green q-mt-md",id:"recievebox-success-message",rounded:"",dense:""})])])),_:1}),(0,o.Wm)(W,{align:"right",class:"text-primary"},{default:(0,o.w5)((()=>[(0,o.wy)((0,o.Wm)(w,{flat:"",label:"Close"},null,512),[[E]]),(0,o.Wm)(w,{flat:"",label:"Ok",onClick:t[4]||(t[4]=t=>e.fetchNote(e.recieveotp))})])),_:1})])),_:1})])),_:1},8,["modelValue"])],64)}n(6204);var v=n(3394),x=n(6970);const w={class:"text-h5 q-mt-sm q-mb-xs text-blue-grey-10"},b={class:"text-caption text-blue-grey-9"};function f(e,t,n,r,i,l){const d=(0,o.up)("q-card-section"),a=(0,o.up)("q-btn"),c=(0,o.up)("q-card");return(0,o.wg)(),(0,o.j4)(c,{flat:"",bordered:"",class:"q-mb-sm cursor-pointer bg-red-1 row items-center justify-between",onClick:t[4]||(t[4]=t=>e.$emit("click",t))},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{class:"q-pt-xs"},{default:(0,o.w5)((()=>[(0,o._)("div",w,(0,x.zw)(n.title),1),(0,o._)("div",b,(0,x.zw)(n.description),1)])),_:1}),(0,o._)("div",null,[(0,o.Wm)(a,{class:"q-mx-sm",round:"",color:"blue",icon:"share",title:"Share",onClick:[t[0]||(t[0]=t=>e.$emit("sharenote",t)),t[1]||(t[1]=(0,s.iM)((()=>{}),["stop"]))]}),(0,o.Wm)(a,{class:"q-mx-sm",round:"",color:"red",icon:"delete",title:"Delete",onClick:[t[2]||(t[2]=t=>e.$emit("deletenote",t)),t[3]||(t[3]=(0,s.iM)((()=>{}),["stop"]))]})])])),_:1})}const q={props:{title:String,description:String,content:String,idx:Number}};var y=n(1639),_=n(4458),W=n(3190),C=n(2150),k=n(9984),I=n.n(k);const Z=(0,y.Z)(q,[["render",f]]),E=Z;I()(q,"components",{QCard:_.Z,QCardSection:W.Z,QBtn:C.Z});var N=n(1726),S=n(8910),B=n(499),Q=n(9981),D=n.n(Q);const O=(0,o.aZ)({components:{NoteCard:E,NotesContainer:v.Z},name:"PageIndex",setup(){const e=(0,N.D)(),t=(0,S.tv)(),n=(0,B.iH)(1);return{router:t,notes:e,sharebox:(0,B.iH)(!1),recievebox:(0,B.iH)(!1),progress:n,recieveotp:(0,B.iH)("")}},methods:{deletenote(e){this.notes.splice(e,1)},sharenote(e){this.sharebox=!0,D().post("https://a2mj.herokuapp.com/",{json:window.btoa(JSON.stringify(this.notes[e]))},{headers:{"Content-Type":"application/json"}}).then((e=>{document.getElementById("share-requsting").hidden=!0,document.getElementById("share-otp").hidden=!1,document.getElementById("otp").innerHTML=e.data.data.otp;var t=120,n=setInterval((()=>{t-=1,this.progress=(t/120).toFixed(2),0!=t&&this.sharebox||(clearInterval(n),this.progress=1)}),1e3)})).catch((e=>{console.log(e)}))},fetchNote(e){console.log(e.loading),document.getElementById("recievebox-loading").hidden=!1,document.getElementById("recievebox-error").hidden=!0,document.getElementById("recievebox-success").hidden=!0,D().get("https://a2mj.herokuapp.com/json/?otp="+e).then((e=>{document.getElementById("recievebox-loading").hidden=!0,document.getElementById("recievebox-success").hidden=!1,document.getElementById("recievebox-success-message").innerHTML="Success! Note recieved successfully.";const t=JSON.parse(window.atob(e.data.json));this.notes.push(t)})).catch((e=>{document.getElementById("recievebox-loading").hidden=!0,document.getElementById("recievebox-error").hidden=!1,document.getElementById("recievebox-error-message").innerHTML=e.response.data.error}))}}});var P=n(9885),j=n(7743),H=n(8289),T=n(1821),V=n(3777),L=n(7128),z=n(2146);const M=(0,y.Z)(O,[["render",g]]),Y=M;I()(O,"components",{QPage:P.Z,QBtn:C.Z,QDialog:j.Z,QCard:_.Z,QCardSection:W.Z,QLinearProgress:H.Z,QCardActions:T.Z,QInput:V.Z,QBanner:L.Z}),I()(O,"directives",{ClosePopup:z.Z})}}]);